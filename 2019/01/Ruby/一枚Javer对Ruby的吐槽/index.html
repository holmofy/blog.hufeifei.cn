<!doctype html><html lang="en"><head><meta charset="utf-8"><script async src="https://www.googletagmanager.com/gtag/js?id=G-H58NSPXYPF"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-H58NSPXYPF")</script><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script"),t=(e.src="https://hm.baidu.com/hm.js?b3392fb5f6d65fb10354f590338d1ee4",document.getElementsByTagName("script")[0]);t.parentNode.insertBefore(e,t)}()</script><script type="text/javascript">!function(t,e,n,c,a,i){t[n]=t[n]||function(){(t[n].q=t[n].q||[]).push(arguments)},(a=e.createElement(c)).async=1,a.src="https://www.clarity.ms/tag/95vxjpui4h",(i=e.getElementsByTagName(c)[0]).parentNode.insertBefore(a,i)}(window,document,"clarity","script")</script><title>一枚Javer对Ruby的吐槽 | holmofy</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="baidu_union_verify" content="b7d27ec946758934fcdf3c5c26386237"><meta description="公司收购了个项目，技术都很老，Web用的Ruby on Rails，前端还在用jQuery，后台定时任务用Java(用的技术也都很老)。自己以前没有接触过Ruby，只是听几个朋友大学里玩过这玩意儿，所以对我来说Ruby就是一门全新的语言。我个人是非常抵触学一门新语言的，Java都还没吃透就并行学Ruby，只会分散深入学习Java的精力。但没办法谁让公司抽到我，还是好好学吧！  1、安装Ruby"><meta property="og:type" content="article"><meta property="og:title" content="一枚Javer对Ruby的吐槽"><meta property="og:url" content="https://blog.hufeifei.cn/2019/01/Ruby/%E4%B8%80%E6%9E%9AJaver%E5%AF%B9Ruby%E7%9A%84%E5%90%90%E6%A7%BD/index.html"><meta property="og:site_name" content="holmofy"><link rel="canonical" href="https://blog.hufeifei.cn/2019/01/Ruby/%E4%B8%80%E6%9E%9AJaver%E5%AF%B9Ruby%E7%9A%84%E5%90%90%E6%A7%BD/index.html"><meta property="description" content="公司收购了个项目，技术都很老，Web用的Ruby on Rails，前端还在用jQuery，后台定时任务用Java(用的技术也都很老)。自己以前没有接触过Ruby，只是听几个朋友大学里玩过这玩意儿，所以对我来说Ruby就是一门全新的语言。我个人是非常抵触学一门新语言的，Java都还没吃透就并行学Ruby，只会分散深入学习Java的精力。但没办法谁让公司抽到我，还是好好学吧！  1、安装Ruby"><meta name="description" content="公司收购了个项目，技术都很老，Web用的Ruby on Rails，前端还在用jQuery，后台定时任务用Java(用的技术也都很老)。自己以前没有接触过Ruby，只是听几个朋友大学里玩过这玩意儿，所以对我来说Ruby就是一门全新的语言。我个人是非常抵触学一门新语言的，Java都还没吃透就并行学Ruby，只会分散深入学习Java的精力。但没办法谁让公司抽到我，还是好好学吧！  1、安装Ruby"><meta property="og:description" content="公司收购了个项目，技术都很老，Web用的Ruby on Rails，前端还在用jQuery，后台定时任务用Java(用的技术也都很老)。自己以前没有接触过Ruby，只是听几个朋友大学里玩过这玩意儿，所以对我来说Ruby就是一门全新的语言。我个人是非常抵触学一门新语言的，Java都还没吃透就并行学Ruby，只会分散深入学习Java的精力。但没办法谁让公司抽到我，还是好好学吧！  1、安装Ruby"><meta property="article:published_time" content="2019-01-12T16:00:00.000Z"><meta property="article:modified_time" content="2024-05-03T05:17:06.703Z"><meta property="article:author" content="胡飞飞"><meta property="article:tag" content="Java"><meta property="article:tag" content="DB"><meta property="article:tag" content="Alibaba"><meta property="article:tag" content="Holmofy"><meta property="article:tag" content="胡飞飞"><meta property="twitter:card" content="summary"><script data-ad-client="ca-pub-7111912103882824" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7111912103882824" crossorigin="anonymous"></script><script async custom-element="amp-auto-ads" src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js"></script><script type="text/javascript" src="//cpro.baidustatic.com/cpro/ui/cm.js" async defer></script><link rel="alternate" href="/atom.xml" title="holmofy" type="application/atom+xml"><link rel="icon" href="//www.hufeifei.cn/favicon.jpg"><link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css"><link href="//unpkg.com/@waline/client@v3/dist/waline.css" rel="stylesheet" type="text/css"><link href="//at.alicdn.com/t/font_841402_efkj8jo1xld.css" rel="stylesheet" type="text/css"><link rel="stylesheet" href="//cdnjs.loli.net/ajax/libs/font-awesome/5.15.3/css/all.min.css" type="text/css"><link rel="stylesheet" href="/css/style.css"><link rel="dns-prefetch" href="//static.zhimg.com"><link rel="dns-prefetch" href="//at.alicdn.com"><link rel="dns-prefetch" href="//cdn.jsdelivr.net"><link rel="dns-prefetch" href="//img-blog.csdn.net"><link rel="dns-prefetch" href="//img-blog.csdnimg.cn"><meta name="generator" content="Hexo 6.3.0"><style>mjx-container[jax="SVG"] {
  direction: ltr;
}

mjx-container[jax="SVG"] > svg {
  overflow: visible;
}

mjx-container[jax="SVG"][display="true"] {
  display: block;
  text-align: center;
  margin: 1em 0;
}

mjx-container[jax="SVG"][justify="left"] {
  text-align: left;
}

mjx-container[jax="SVG"][justify="right"] {
  text-align: right;
}

g[data-mml-node="merror"] > g {
  fill: red;
  stroke: red;
}

g[data-mml-node="merror"] > rect[data-background] {
  fill: yellow;
  stroke: none;
}

g[data-mml-node="mtable"] > line[data-line] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > rect[data-frame] {
  stroke-width: 70px;
  fill: none;
}

g[data-mml-node="mtable"] > .mjx-dashed {
  stroke-dasharray: 140;
}

g[data-mml-node="mtable"] > .mjx-dotted {
  stroke-linecap: round;
  stroke-dasharray: 0,140;
}

g[data-mml-node="mtable"] > svg {
  overflow: visible;
}

[jax="SVG"] mjx-tool {
  display: inline-block;
  position: relative;
  width: 0;
  height: 0;
}

[jax="SVG"] mjx-tool > mjx-tip {
  position: absolute;
  top: 0;
  left: 0;
}

mjx-tool > mjx-tip {
  display: inline-block;
  padding: .2em;
  border: 1px solid #888;
  font-size: 70%;
  background-color: #F8F8F8;
  color: black;
  box-shadow: 2px 2px 5px #AAAAAA;
}

g[data-mml-node="maction"][data-toggle] {
  cursor: pointer;
}

mjx-status {
  display: block;
  position: fixed;
  left: 1em;
  bottom: 1em;
  min-width: 25%;
  padding: .2em .4em;
  border: 1px solid #888;
  font-size: 90%;
  background-color: #F8F8F8;
  color: black;
}

foreignObject[data-mjx-xml] {
  font-family: initial;
  line-height: normal;
  overflow: visible;
}

.MathJax path {
  stroke-width: 3;
}

mjx-container[display="true"] {
  overflow: auto hidden;
}

mjx-container[display="true"] + br {
  display: none;
}
</style><style>
    figure.codeblock {
       margin: 0;
    }
    figure figcaption .tabs {
      display: flex;
      margin: 0;
    }
    figure figcaption .tabs .tab {
      cursor: pointer;
      list-style: none;
      padding: 5px 15px;
    }
    figure figcaption .tabs .tab.active {
      background: #2d2d2d;
      color: white;
    }
  </style></head><body><amp-auto-ads type="adsense" data-ad-client="ca-pub-7111912103882824"></amp-auto-ads><div id="container"><div id="wrap"><header id="header"><div class="outer" id="header-outer"><div class="inner" id="header-inner"><nav id="main-nav"><a class="nav-icon" id="main-nav-toggle"><i class="fas fa-bars"></i></a><a class="main-nav-link" href="//www.hufeifei.cn">主页</a><a class="main-nav-link" href="/">博客</a><a class="main-nav-link" href="/archives">归档</a><a class="main-nav-link" target="_blank" rel="noopener" href="//algo.hufeifei.cn">算法</a><a class="main-nav-link" href="/book">书籍</a><a class="main-nav-link" href="/github">Github</a></nav><nav id="sub-nav"><a class="nav-icon" id="nav-rss-link" href="/atom.xml" title="RSS Feed"><i class="fa fa-rss"></i></a><a class="nav-icon" id="nav-search-btn" title="Search"><i class="fas fa-search"></i></a></nav><div id="search-form-wrap"><form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit"><i class="fas fa-search"></i></button><input type="hidden" name="sitesearch" value="https://blog.hufeifei.cn"></form></div></div></div></header><div class="outer"><section id="main"><article class="article article-type-post" id="post-Ruby/一枚Javer对Ruby的吐槽" itemscope itemprop="blogPost"><div class="article-meta"><a class="article-date" href="/2019/01/Ruby/%E4%B8%80%E6%9E%9AJaver%E5%AF%B9Ruby%E7%9A%84%E5%90%90%E6%A7%BD/"><time datetime="2019-01-12T16:00:00.000Z" itemprop="datePublished">2019-01-13</time></a><div class="article-category"><a class="article-category-link" href="/categories/Ruby/">Ruby</a></div><div class="article-views leancloud_visitors" id="/2019/01/Ruby/%E4%B8%80%E6%9E%9AJaver%E5%AF%B9Ruby%E7%9A%84%E5%90%90%E6%A7%BD/" data-flag-title="一枚Javer对Ruby的吐槽" title="Views"><i class="fas fa-eye"></i><span class="waline-pageview-count" data-path="/2019/01/Ruby/%E4%B8%80%E6%9E%9AJaver%E5%AF%B9Ruby%E7%9A%84%E5%90%90%E6%A7%BD/"></span></div></div><div class="article-inner"><header class="article-header" style="text-align:center"><h1 class="article-title" itemprop="name">一枚Javer对Ruby的吐槽</h1></header><div class="article-entry" itemprop="articleBody"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><blockquote><p>公司收购了个项目，技术都很老，Web用的Ruby on Rails，前端还在用jQuery，后台定时任务用Java(用的技术也都很老)。自己以前没有接触过Ruby，只是听几个朋友大学里玩过这玩意儿，所以对我来说Ruby就是一门全新的语言。我个人是非常抵触学一门新语言的，Java都还没吃透就并行学Ruby，只会分散深入学习Java的精力。但没办法谁让公司抽到我，还是好好学吧！</p></blockquote><h2>1、安装Ruby</h2><p>Windows上傻瓜式安装Ruby就不赘述了(有<a target="_blank" rel="noopener" href="https://rubyinstaller.org/">RubyInstaller</a>会点下一步就行)，其他操作系统都可以用系统相应的包依赖管理器安装Ruby(Linux上的yum、apt-get，Mac上的homebrew)。但是这些包管理器通常只能安装yum源中已有的二进制包，如果你想要的Ruby版本没有在对应操作系统已编译的二进制包，那就只能下载源码自行编译了。虽然通常只需三个命令就能完成编译，但是多个Ruby之间版本的切换也是个问题，这也是小型脚本语言的痛。像Java大版本内不会有语法上改变，小版本也只是修复些bug，切换版本重新编译费时费劲，但Node.js和Ruby这样小巧而且版本间差异相对较大的语言，就需要运行环境的版本管理工具了。</p><p>大多数Rubyist都使用Ruby管理工具管理多个Ruby，<a target="_blank" rel="noopener" href="https://www.ruby-lang.org/en/documentation/installation/#managers">官方列出来的Ruby管理工具</a>有四个，最常用也是最好用的就是<a target="_blank" rel="noopener" href="https://github.com/rvm/rvm">RVM</a>(和Node.js对应有<a target="_blank" rel="noopener" href="https://github.com/creationix/nvm">NVM</a>)。安装RVM只需要从<code>https://get.rvm.io</code>下载一个<a target="_blank" href="https://raw.githubusercontent.com/rvm/rvm/master/binscripts/rvm-installer" rel="external noreferrer nofollow noopener noopener" referrerpolicy="no-referrer">rvm-installer的Bash脚本</a>即可。<code>ruby-installer</code>支持默认支持两个版本<code>master</code>和<code>stable</code>，需要稳定版直接<code>curl -sSL https://get.rvm.io | bash -s stable</code>一个管道命令解决。</p><blockquote><p>和<code>nvm</code>的<code>$HOME/.nvm</code>一样<code>rvm</code>也会在用户目录下创建<code>.rvm</code>目录保存各个版本的Ruby</p></blockquote><p>安装完RVM后，使用以下命令就可以安装各种版本的Ruby了。</p><p><code>rvm install INTERPRETER[-VERSION] OPTIONS</code></p><p>其中<code>INTERPRETER</code>指的是不同语言实现的Ruby解释器，没有指定默认就是<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Ruby_MRI">CRuby</a>，也可以指定Java实现的jruby或.Net实现的ironruby等，使用<code>rvm list known</code>可以查看可选的Ruby版本。</p><p>切换Ruby版本只需用<code>rvm use INTERPRETER[-VERSION]</code>命令。</p><h2>2、Ruby周边</h2><p><strong>gem</strong></p><p><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/RubyGems">RubyGems</a>是Ruby的包管理工具(和Java的Maven，JS的npm类似)，从Ruby1.8开始就称为了Ruby默认的包管理工具。使用上和npm大体一致，详情可以参看<a target="_blank" rel="noopener" href="https://guides.rubygems.org/">官方文档</a></p><p><a target="_blank" rel="noopener" href="https://github.com/bundler/bundler"><strong>bundler</strong></a></p><p>如果说gem是npm的阉割版，bundler就是为了补全被阉割的那部分。<a target="_blank" rel="noopener" href="https://guides.rubygems.org/specification-reference/">gem的<code>.gemspec</code></a>虽然定义了包本身的信息，但是不能像<code>npm install</code>一样安装并管理这个包依赖的其他包。Bundler需要定义一个<code>Gemfile</code>的文件，这个文件中可以定义应用依赖的gems的兼容版本(和npm的package.json类似)。</p><p>所以<a target="_blank" rel="noopener" href="https://bundler.io/">Bundler官网</a>标题就说Bundler是管理Ruby的gems最好的方式。</p><blockquote><p>Gemfile与.gemspec的区别详请参考<a target="_blank" rel="noopener" href="https://medium.com/@divya.n/gemfile-vs-gemspec-ee72512da246">这篇文章</a></p></blockquote><p><strong>Ruby on Rails</strong></p><p><a target="_blank" rel="noopener" href="https://rubyonrails.org/">Ruby on Rails</a>是一个基于Ruby的MVC框架，和<a target="_blank" rel="noopener" href="http://expressjs.com/">express.js</a>类似，也正是因为这个框架使得默默无闻的Ruby一夜崛起。也是这个框架最早提出<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Convention_over_configuration">Convention Over Configuration</a>的概念，后来其他语言的框架也纷纷效仿，如今口口相传的SpringBoot也深受它的影响。</p><h2>3、 初学Ruby的20条经验</h2><p><strong>1、</strong> Ruby和JS、Python一样是解释性脚本语言，使用源文件即可执行，按照惯例源文件以<code>.rb</code>为后缀。和Python的强制缩进不通，Ruby的缩进并不重要，但是为了代码可读性必须得缩进。</p><p><strong>2、</strong> 不像JS中<code>0</code>、<code>undefined</code>、<code>null</code>、<code>""</code>等值都能被转成false，在Ruby中除了<code>false</code>和<code>nil</code>这两个保留字，其他全为true。</p><p><strong>3、</strong> Ruby方法调用时，括号是可选的。方法中如果没有明确的<code>return</code>，则返回最后一条语句的结果。</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">foobar</span><br><span class="line">foobar()</span><br><span class="line">foobar(a,b,c)</span><br><span class="line">foobar a,b,c</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">my_method</span>(<span class="params">a,b</span>)</span><br><span class="line">    puts a+b</span><br><span class="line">    a*b     <span class="comment"># 这条语句的结果将会作为返回值</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><blockquote><p>详情参考<a target="_blank" rel="noopener" href="https://docs.ruby-lang.org/en/2.6.0/syntax/methods_rdoc.html">官方文档</a></p></blockquote><p><strong>4、</strong> Ruby除了支持<code>+</code>、<code>-</code>、<code>*</code>、<code>/</code>、<code>%</code>等算数运算符外，还支持<code>**</code>幂运算符，但是不支持<code>++</code>、<code>--</code>运算符。这点和Python一致。在C和Java中<code>%</code>表示取余操作，但Python和Ruby中<code>%</code>表示求模运算。</p> <mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align:-.566ex" xmlns="http://www.w3.org/2000/svg" width="33.43ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 14776.1 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">取</text></g><g data-mml-node="mi" transform="translate(900,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">余</text></g><g data-mml-node="mi" transform="translate(1800,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">：</text></g><g data-mml-node="mi" transform="translate(2700,0)"><path data-c="1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(3151,0)"><path data-c="1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path></g><g data-mml-node="mi" transform="translate(3617,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(4495,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(4884,0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mo" transform="translate(5413,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(5857.7,0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mo" transform="translate(6286.7,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mo" transform="translate(6953.4,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mi" transform="translate(8009.2,0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mo" transform="translate(8760.4,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mi" transform="translate(9760.7,0)"><path data-c="1D456" d="M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(10105.7,0)"><path data-c="1D45B" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(10705.7,0)"><path data-c="1D461" d="M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z"></path></g><g data-mml-node="mo" transform="translate(11066.7,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(11455.7,0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(11984.7,0)"><g data-mml-node="mo"><path data-c="2F" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z"></path></g></g><g data-mml-node="mi" transform="translate(12484.7,0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mo" transform="translate(12913.7,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mo" transform="translate(13524.9,0)"><path data-c="2217" d="M229 286Q216 420 216 436Q216 454 240 464Q241 464 245 464T251 465Q263 464 273 456T283 436Q283 419 277 356T270 286L328 328Q384 369 389 372T399 375Q412 375 423 365T435 338Q435 325 425 315Q420 312 357 282T289 250L355 219L425 184Q434 175 434 161Q434 146 425 136T401 125Q393 125 383 131T328 171L270 213Q283 79 283 63Q283 53 276 44T250 35Q231 35 224 44T216 63Q216 80 222 143T229 213L171 171Q115 130 110 127Q106 124 100 124Q87 124 76 134T64 161Q64 166 64 169T67 175T72 181T81 188T94 195T113 204T138 215T170 230T210 250L74 315Q65 324 65 338Q65 353 74 363T98 374Q106 374 116 368T171 328L229 286Z"></path></g><g data-mml-node="mi" transform="translate(14247.1,0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g></g></g></svg></mjx-container><p><br></p><mjx-container class="MathJax" jax="SVG" display="true"><svg style="vertical-align:-.566ex" xmlns="http://www.w3.org/2000/svg" width="35.808ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 15827.1 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mi"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">求</text></g><g data-mml-node="mi" transform="translate(900,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">模</text></g><g data-mml-node="mi" transform="translate(1800,0)"><text data-variant="italic" transform="scale(1,-1)" font-size="884px" font-family="serif" font-style="italic">：</text></g><g data-mml-node="mi" transform="translate(2700,0)"><path data-c="1D45A" d="M21 287Q22 293 24 303T36 341T56 388T88 425T132 442T175 435T205 417T221 395T229 376L231 369Q231 367 232 367L243 378Q303 442 384 442Q401 442 415 440T441 433T460 423T475 411T485 398T493 385T497 373T500 364T502 357L510 367Q573 442 659 442Q713 442 746 415T780 336Q780 285 742 178T704 50Q705 36 709 31T724 26Q752 26 776 56T815 138Q818 149 821 151T837 153Q857 153 857 145Q857 144 853 130Q845 101 831 73T785 17T716 -10Q669 -10 648 17T627 73Q627 92 663 193T700 345Q700 404 656 404H651Q565 404 506 303L499 291L466 157Q433 26 428 16Q415 -11 385 -11Q372 -11 364 -4T353 8T350 18Q350 29 384 161L420 307Q423 322 423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 181Q151 335 151 342Q154 357 154 369Q154 405 129 405Q107 405 92 377T69 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mi" transform="translate(3578,0)"><path data-c="1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"></path></g><g data-mml-node="mi" transform="translate(4063,0)"><path data-c="1D451" d="M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z"></path></g><g data-mml-node="mo" transform="translate(4583,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(4972,0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mo" transform="translate(5501,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mi" transform="translate(5945.7,0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mo" transform="translate(6374.7,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mo" transform="translate(7041.4,0)"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g><g data-mml-node="mi" transform="translate(8097.2,0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="mo" transform="translate(8848.4,0)"><path data-c="2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path></g><g data-mml-node="mi" transform="translate(9848.7,0)"><path data-c="1D453" d="M118 -162Q120 -162 124 -164T135 -167T147 -168Q160 -168 171 -155T187 -126Q197 -99 221 27T267 267T289 382V385H242Q195 385 192 387Q188 390 188 397L195 425Q197 430 203 430T250 431Q298 431 298 432Q298 434 307 482T319 540Q356 705 465 705Q502 703 526 683T550 630Q550 594 529 578T487 561Q443 561 443 603Q443 622 454 636T478 657L487 662Q471 668 457 668Q445 668 434 658T419 630Q412 601 403 552T387 469T380 433Q380 431 435 431Q480 431 487 430T498 424Q499 420 496 407T491 391Q489 386 482 386T428 385H372L349 263Q301 15 282 -47Q255 -132 212 -173Q175 -205 139 -205Q107 -205 81 -186T55 -132Q55 -95 76 -78T118 -61Q162 -61 162 -103Q162 -122 151 -136T127 -157L118 -162Z"></path></g><g data-mml-node="mi" transform="translate(10398.7,0)"><path data-c="1D459" d="M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z"></path></g><g data-mml-node="mi" transform="translate(10696.7,0)"><path data-c="1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"></path></g><g data-mml-node="mi" transform="translate(11181.7,0)"><path data-c="1D45C" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"></path></g><g data-mml-node="mi" transform="translate(11666.7,0)"><path data-c="1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path></g><g data-mml-node="mo" transform="translate(12117.7,0)"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path></g><g data-mml-node="mi" transform="translate(12506.7,0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(13035.7,0)"><g data-mml-node="mo"><path data-c="2F" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z"></path></g></g><g data-mml-node="mi" transform="translate(13535.7,0)"><path data-c="1D44F" d="M73 647Q73 657 77 670T89 683Q90 683 161 688T234 694Q246 694 246 685T212 542Q204 508 195 472T180 418L176 399Q176 396 182 402Q231 442 283 442Q345 442 383 396T422 280Q422 169 343 79T173 -11Q123 -11 82 27T40 150V159Q40 180 48 217T97 414Q147 611 147 623T109 637Q104 637 101 637H96Q86 637 83 637T76 640T73 647ZM336 325V331Q336 405 275 405Q258 405 240 397T207 376T181 352T163 330L157 322L136 236Q114 150 114 114Q114 66 138 42Q154 26 178 26Q211 26 245 58Q270 81 285 114T318 219Q336 291 336 325Z"></path></g><g data-mml-node="mo" transform="translate(13964.7,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path></g><g data-mml-node="mo" transform="translate(14575.9,0)"><path data-c="2217" d="M229 286Q216 420 216 436Q216 454 240 464Q241 464 245 464T251 465Q263 464 273 456T283 436Q283 419 277 356T270 286L328 328Q384 369 389 372T399 375Q412 375 423 365T435 338Q435 325 425 315Q420 312 357 282T289 250L355 219L425 184Q434 175 434 161Q434 146 425 136T401 125Q393 125 383 131T328 171L270 213Q283 79 283 63Q283 53 276 44T250 35Q231 35 224 44T216 63Q216 80 222 143T229 213L171 171Q115 130 110 127Q106 124 100 124Q87 124 76 134T64 161Q64 166 64 169T67 175T72 181T81 188T94 195T113 204T138 215T170 230T210 250L74 315Q65 324 65 338Q65 353 74 363T98 374Q106 374 116 368T171 328L229 286Z"></path></g><g data-mml-node="mi" transform="translate(15298.1,0)"><path data-c="1D44E" d="M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z"></path></g></g></g></svg></mjx-container> <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">// Java 结果的正负与被除数一致</span><br><span class="line">System.out.println(5 % 3);     //  2</span><br><span class="line">System.out.println(-5 % 3);    // -2</span><br><span class="line">System.out.println(5 % -3);    //  2</span><br><span class="line">System.out.println(-5 % -3);   // -2</span><br><span class="line"></span><br><span class="line">// Ruby 结果的正负与除数一致</span><br><span class="line">puts (5 % 3)     # prints  2  </span><br><span class="line">puts (-5 % 3)    # prints  1  </span><br><span class="line">puts (5 % -3)    # prints -1  </span><br><span class="line">puts (-5 % -3)   # prints -2</span><br><span class="line"></span><br><span class="line">// Python</span><br><span class="line">print (5 % 3)     # prints  2  </span><br><span class="line">print (-5 % 3)    # prints  1  </span><br><span class="line">print (5 % -3)    # prints -1  </span><br><span class="line">print (-5 % -3)   # prints -2  </span><br></pre></td></tr></table></figure><p><strong>5、</strong> Ruby中一切皆对象，不像Java还有几个基本类型。Ruby中数值类型也是对象。Ruby中Float是双精度浮点型(也就是Java里的Double)。并且Ruby原生就支持BigNum(也就是Java中的BigInteger)，所以再也不用担心算数溢出的问题了。并且Ruby 2.4之后<a target="_blank" rel="noopener" href="https://github.com/rails/rails/pull/25056">Fixnum和Bignum统一为Integer</a>了。</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Before Ruby 2.4</span></span><br><span class="line"><span class="number">1</span>.<span class="keyword">class</span>         <span class="comment">#=&gt; Fixnum</span></span><br><span class="line">(<span class="number">2</span> ** <span class="number">62</span>).<span class="keyword">class</span> <span class="comment">#=&gt; Bignum</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Ruby 2.4</span></span><br><span class="line"><span class="number">1</span>.<span class="keyword">class</span>         <span class="comment">#=&gt; Integer</span></span><br><span class="line">(<span class="number">2</span> ** <span class="number">62</span>).<span class="keyword">class</span> <span class="comment">#=&gt; Integer</span></span><br></pre></td></tr></table></figure><blockquote><p>有关Fixnum和Bignum更多细节可参考<a target="_blank" rel="noopener" href="https://blog.bigbinary.com/2016/11/18/ruby-2-4-unifies-fixnum-and-bignum-into-integer.html">这篇文章</a>，除了Integer和Float这两种常用的数值类型，<a target="_blank" rel="noopener" href="https://docs.ruby-lang.org/en/2.0.0/Numeric.html">Numeric</a>还有<a target="_blank" rel="noopener" href="https://docs.ruby-lang.org/en/2.0.0/Rational.html">Rational</a>(有理数)和<a target="_blank" rel="noopener" href="https://docs.ruby-lang.org/en/2.0.0/Complex.html">Complex</a>(复数)两个子类，用处不大这里不过多讨论。</p></blockquote><p><strong>6、</strong> Ruby的变量命名会影响变量的作用域：</p><ul><li><p>局部变量的命名规则和C系列语言命名一样，字母下划线开头数字字母下划线的组合；</p><blockquote><p>使用<code>local_variables</code>方法可以查看当前作用域内的局部变量</p></blockquote></li><li><p>在局部变量的开头加上<code>@</code>，表示这个变量是实例对象的属性变量(@sign，@_，@Counter)；</p><blockquote><p>使用<code>instance_variables</code>方法可以查看对象的实例变量</p></blockquote></li><li><p>在局部变量的开头加上<code>@@</code>，表示类变量；</p><blockquote><p>使用<code>class_variables</code>方法可以查看类变量</p></blockquote></li><li><p>在局部变量的开头加上<code>$</code>，表示全局变量；</p><blockquote><p>使用<code>global_variables</code>方法可以查看全局变量</p></blockquote></li><li><p>按照Ruby的约定，全大写的变量是常量，Ruby允许修改常量，但是会报警告。</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable constant_">PI</span> = <span class="number">3.141592653</span>  <span class="comment"># 第一次定义常量</span></span><br><span class="line"><span class="variable constant_">PI</span> = <span class="number">3.14</span>         <span class="comment"># 修改常量</span></span><br><span class="line"><span class="symbol">warning:</span> already initialized constant <span class="variable constant_">PI</span></span><br><span class="line"><span class="symbol">warning:</span> previous definition of <span class="variable constant_">PI</span> was here</span><br><span class="line">puts <span class="variable constant_">PI</span>           <span class="comment"># 3.14</span></span><br></pre></td></tr></table></figure></li></ul><p><strong>7、</strong> Ruby中字符串可以使用单引号也可以使用双引号，但是单引号中只会对<code>\'</code>和<code>\\</code>进行转义，双引号中除了会对各种转移字符转义外，还支持变量插值。</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">puts <span class="string">'\\hello \'\n\' world\\'</span>  </span><br><span class="line">&gt; \hello <span class="string">'\n'</span> world\</span><br><span class="line"></span><br><span class="line">puts <span class="string">"\\hello \'\n\' world\\"</span></span><br><span class="line">&gt; \hello <span class="string">'</span></span><br><span class="line"><span class="string">  '</span> world\</span><br><span class="line">    </span><br><span class="line">name = <span class="string">'holmofy'</span></span><br><span class="line">puts <span class="string">"hello <span class="subst">#{name}</span>"</span></span><br><span class="line">&gt; hello holmofy</span><br></pre></td></tr></table></figure><p><strong>8、</strong> Ruby中每声明一个字符串都会创建一个新的字符串对象，而且在Ruby中要判断两个对象是否是同一个对象不能简单的用<code>==</code>，对象的<code>.eql?</code>方法和<code>==</code>都只会判断对象的内容是否相同，<code>.equal?</code>方法才能判断是否为同一个对象。</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">s1 = <span class="string">"hello world"</span></span><br><span class="line">s2 = <span class="string">"hello world"</span></span><br><span class="line">puts s1.object_id    <span class="comment"># 70254227595080</span></span><br><span class="line">puts s2.object_id    <span class="comment"># 70254227587240</span></span><br><span class="line">puts s1 == s1        <span class="comment"># true</span></span><br><span class="line">puts s1.eql? s2      <span class="comment"># true</span></span><br><span class="line">puts s1.equal? s2    <span class="comment"># false</span></span><br></pre></td></tr></table></figure><p><strong>9、</strong> Ruby中声明一个字符串数组，可以使用<code>%w</code>快捷方式：</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">names1 = [ <span class="string">'ann'</span>, <span class="string">'richard'</span>, <span class="string">'william'</span>, <span class="string">'susan'</span>, <span class="string">'pat'</span> ]  </span><br><span class="line">puts names1[<span class="number">0</span>] <span class="comment"># ann  </span></span><br><span class="line">puts names1[<span class="number">3</span>] <span class="comment"># susan  </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用%w快捷方式声明数组，其中w就是word的缩写</span></span><br><span class="line"><span class="comment"># 其实等价于'ann richard william susan pat'.split(' ')</span></span><br><span class="line">names2 = <span class="string">%w{  ann richard william susan pat }</span>  </span><br><span class="line">puts names2[<span class="number">0</span>] <span class="comment"># ann  </span></span><br><span class="line">puts names2[<span class="number">3</span>] <span class="comment"># susan  </span></span><br></pre></td></tr></table></figure><p>更多字符串快捷方式可以参考<a target="_blank" rel="noopener" href="https://simpleror.wordpress.com/2009/03/15/q-q-w-w-x-r-s/">这篇文章</a></p><p><strong>10、</strong> Java中不支持多行文本字符串，但是JS(反点)和Python(三个连续引号)这些脚本语言中都支持，Ruby中可以使用<a target="_blank" rel="noopener" href="https://docs.ruby-lang.org/en/2.0.0/syntax/literals_rdoc.html#label-Here+Documents">Here Document</a>。Ruby中追加字符串可以使用<code>&lt;&lt;</code>操作符。</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">expected_result = <span class="string">&lt;&lt;HEREDOC</span></span><br><span class="line"><span class="string">This would contain specially formatted text.</span></span><br><span class="line"><span class="string">That might span many lines</span></span><br><span class="line"><span class="string">HEREDOC</span></span><br><span class="line"></span><br><span class="line">a = <span class="string">"hello"</span></span><br><span class="line">a &lt;&lt; <span class="string">"world"</span></span><br><span class="line">puts a       <span class="comment"># hello world</span></span><br></pre></td></tr></table></figure><p><strong>11、</strong> 对象的Mutable和Immutable一直是令人争议的话题，可变意味着不安全难以维护，不可变意味着效率低下。比如在Java、JS和Python中字符串对象都是不可变的，在JS和Python中字符串拼接通常效率极低，在Java中有StringBuilder解决这个问题，但是Ruby为了解决这些问题，在String中提供了两组方法，其中方法名的末尾加上<code>!</code>表示该方法会修改对象内容。<code>!</code>符号作为约定被用在了标准库和第三方库中。</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="string">"hello"</span></span><br><span class="line">puts a.object_id   <span class="comment"># 70254210667380</span></span><br><span class="line">b = a.reverse</span><br><span class="line">puts a             <span class="comment"># hello</span></span><br><span class="line">puts b             <span class="comment"># olleh</span></span><br><span class="line">puts a.object_id   <span class="comment"># 70254210667380</span></span><br><span class="line">puts b.object_id   <span class="comment"># 70254210630260</span></span><br><span class="line"></span><br><span class="line">a = <span class="string">"hello"</span></span><br><span class="line">puts a.object_id   <span class="comment"># 70254227510440</span></span><br><span class="line">b = a.reverse!</span><br><span class="line">puts a   <span class="comment"># olleh</span></span><br><span class="line">puts b   <span class="comment"># olleh</span></span><br><span class="line">puts a.object_id   <span class="comment"># 70254227510440</span></span><br><span class="line">puts b.object_id   <span class="comment"># 70254227510440</span></span><br></pre></td></tr></table></figure><p><strong>12、</strong> 方法名除了有<code>!</code>后缀表示会修改对象或入参的内容，Ruby还有<code>?</code>后缀表示这个方法返回<code>true</code>或<code>false</code>，<code>=</code>后缀表示这个方法是对象属性的setter方法，可以使用赋值运算符修改对象属性。</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">puts <span class="string">"hello"</span>.start_with? <span class="string">"hell"</span>               <span class="comment"># true</span></span><br></pre></td></tr></table></figure><p><strong>13、</strong> Ruby内建的正则表达式对象和JS一样，使用<code>/.../</code>双斜杠创建正则字面量，也可以使用<code>%r{...}</code>或<a target="_blank" rel="noopener" href="http://ruby-doc.org/core-2.6/Regexp.html">Regexp</a>的构造函数。</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 和JS不同的是，//斜杠中间可以使用变量插值</span></span><br><span class="line">place = <span class="string">"東京都"</span></span><br><span class="line">m = <span class="regexp">/<span class="subst">#{place}</span>/</span>.match(<span class="string">"Go to 東京都"</span>)</span><br><span class="line">    <span class="comment">#=&gt; #&lt;MatchData "東京都"&gt;</span></span><br><span class="line">puts m[<span class="number">0</span>]  <span class="comment"># 東京都</span></span><br><span class="line"><span class="comment"># 和其他语言一样m[0]是整个正则匹配组，如果正则中有其他捕获组索引从1开始</span></span><br></pre></td></tr></table></figure><p><strong>14、</strong> 由于Ruby中每声明一个字符串都会创建一个字符串对象，并且字符串对象是可变的，所以Ruby还提供了一个与字符串类似，但不可变且全局唯一的Symbol类对象。</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">puts <span class="string">"a"</span>.object_id     <span class="comment"># 70107393092020</span></span><br><span class="line">puts <span class="string">"a"</span>.object_id     <span class="comment"># 70107393041480</span></span><br><span class="line">puts <span class="symbol">:a</span>.object_id      <span class="comment"># 372328</span></span><br><span class="line">puts <span class="symbol">:a</span>.object_id      <span class="comment"># 372328</span></span><br><span class="line">puts (<span class="symbol">:<span class="string">"a"</span></span>).object_id  <span class="comment"># 372328</span></span><br></pre></td></tr></table></figure><p>Symbol包括变量名、方法名、类名，每声明一个变量，方法，类都会在符号表中记录下相应的名字，使用<code>Symbol.all_symbols</code>方法可以查看当前符号表里所有的符号。</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 不要尝试使用Symbol.all_symbols.include? :new_symbol的方式检测符号是否存在</span></span><br><span class="line"><span class="comment"># 因为当这条语句解析时:new_symbol已经添加到符号表中了，执行的结果肯定是true</span></span><br><span class="line"><span class="comment"># 所以这里要转成字符串</span></span><br><span class="line">curr_symbols = <span class="title class_">Symbol</span>.all_symbols.map {|<span class="params">symbol</span>| symbol.to_s}</span><br><span class="line">puts curr_symbols.<span class="keyword">include</span>? <span class="string">'_any_variable_name_'</span>  <span class="comment"># false</span></span><br><span class="line">_any_variable_name_ = <span class="string">'this is new variable'</span>      <span class="comment"># 这里可以是新变量、方法、类的声明</span></span><br><span class="line">curr_symbols = <span class="title class_">Symbol</span>.all_symbols.map {|<span class="params">symbol</span>| symbol.to_s}</span><br><span class="line">puts curr_symbols.<span class="keyword">include</span>? <span class="string">'_any_variable_name_'</span>  <span class="comment"># true</span></span><br></pre></td></tr></table></figure><p><strong>15、</strong> Ruby内建了<a target="_blank" rel="noopener" href="https://github.com/ruby/ruby/blob/trunk/array.c">Array</a>、<a target="_blank" rel="noopener" href="https://github.com/ruby/ruby/blob/trunk/hash.c">Hash</a>、<a target="_blank" rel="noopener" href="https://github.com/ruby/ruby/blob/trunk/range.c">Range</a>三种数据结构。可以简单地与Java中的ArrayList、HashMap、<a target="_blank" rel="noopener" href="https://github.com/google/guava/wiki/RangesExplained">Guava中的Range</a>等同。</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">arr = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>]</span><br><span class="line">puts arr[<span class="number">0</span>]             <span class="comment"># 访问数组下标从0开始</span></span><br><span class="line">arr = [<span class="number">1</span>, <span class="string">"two"</span>, <span class="number">3.0</span>]   <span class="comment"># 可以存放不通类型的对象</span></span><br><span class="line">puts arr[-<span class="number">1</span>]            <span class="comment"># 索引值可以为负数，最后一个元素索引为-1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">grades = { <span class="string">"Jane Doe"</span> =&gt; <span class="number">10</span>, <span class="string">"Jim Doe"</span> =&gt; <span class="number">6</span> }</span><br><span class="line">puts grades[<span class="string">"Jane Doe"</span>]     <span class="comment"># 10</span></span><br><span class="line"><span class="comment"># 使用Symbol作为Key</span></span><br><span class="line">options = { <span class="symbol">:font_size</span> =&gt; <span class="number">10</span>, <span class="symbol">:font_family</span> =&gt; <span class="string">"Arial"</span> }</span><br><span class="line">options[<span class="symbol">:font_size</span>]         <span class="comment"># 10</span></span><br><span class="line"><span class="comment"># 使用Symbol作为Key可以简写成下面这种形式</span></span><br><span class="line">options = { <span class="symbol">font_size:</span> <span class="number">10</span>, <span class="symbol">font_family:</span> <span class="string">"Arial"</span> }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># (start..end)语法表示Range对象，两个点包括end，三个点不包括end</span></span><br><span class="line">(-<span class="number">1</span>..-<span class="number">5</span>).to_a      <span class="comment">#=&gt; []</span></span><br><span class="line">(-<span class="number">5</span>..-<span class="number">1</span>).to_a      <span class="comment">#=&gt; [-5, -4, -3, -2, -1]</span></span><br><span class="line">(<span class="string">'a'</span>..<span class="string">'e'</span>).to_a    <span class="comment">#=&gt; ["a", "b", "c", "d", "e"]</span></span><br><span class="line">(<span class="string">'a'</span>...<span class="string">'e'</span>).to_a   <span class="comment">#=&gt; ["a", "b", "c", "d"]</span></span><br></pre></td></tr></table></figure><blockquote><p><a target="_blank" rel="noopener" href="https://medium.com/square-corner-blog/rubys-new-infinite-range-syntax-0-97777cf06270">Ruby2.6开始支持Endless Range,即end值可以不指定，默认到无穷</a></p><p>更多内容参考<a target="_blank" rel="noopener" href="http://ruby-doc.org/core-2.6/Array.html">Array</a>、<a target="_blank" rel="noopener" href="http://ruby-doc.org/core-2.6/Hash.html">Hash</a>、<a target="_blank" rel="noopener" href="http://ruby-doc.org/core-2.6/Range.html">Range</a>的官方文档</p></blockquote><p><strong>16、</strong> 调用一个方法就相当于发一个消息，Ruby的传参还是比较复杂的</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">my_method(arg1, arg2)</span><br><span class="line">my_method arg1, arg2</span><br><span class="line"><span class="comment"># 但是同时调用两个方法发生歧义，Ruby会报语法错误</span></span><br><span class="line"><span class="comment"># 比如下面的arg3不知道应该穿给method_one还是method_two</span></span><br><span class="line">method_one arg1，method_two arg2，arg3</span><br><span class="line"></span><br><span class="line"><span class="comment"># 可以传hash参数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">my_method</span>(<span class="params">arg</span>)</span><br><span class="line">    puts arg</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment"># 调用时不用{}</span></span><br><span class="line">my_method(<span class="string">'key'</span>=&gt;<span class="string">'value'</span>)  <span class="comment"># {"key"=&gt;"value"}</span></span><br><span class="line">my_method(<span class="symbol">key:</span><span class="string">'value'</span>)     <span class="comment"># {:key=&gt;"value"}</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 可以使用*号，代表可变参数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">rest_method</span>(<span class="params">arg1, *args</span>)</span><br><span class="line">    puts <span class="string">"first argument is <span class="subst">#{arg1}</span>"</span></span><br><span class="line">    puts <span class="string">"other arguments is <span class="subst">#{args}</span>"</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">rest_method(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>)</span><br><span class="line"><span class="comment"># first argument is 1</span></span><br><span class="line"><span class="comment"># other arguments is [2, 3, 4]</span></span><br><span class="line">rest_method(<span class="number">1</span>, <span class="symbol">key1:</span><span class="number">2</span>, <span class="symbol">key2:</span><span class="number">3</span>)  <span class="comment"># hash参数必须放在最后</span></span><br><span class="line">rest_method(<span class="number">1</span>, <span class="symbol">key1:</span><span class="number">2</span>, <span class="symbol">key2:</span><span class="number">3</span> ,<span class="number">4</span>) <span class="comment"># 否则会报语法错误</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法支持默认参数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">default_arg_method</span>(<span class="params">a, b, c = <span class="number">3</span>, d = <span class="number">4</span></span>)</span><br><span class="line">  p [a, b, c, d]</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">default_arg_method(<span class="number">1</span>, <span class="number">2</span>)        <span class="comment"># [1,2,3,4]</span></span><br><span class="line">default_arg_method(<span class="number">1</span>, <span class="number">2</span>, <span class="number">5</span>)     <span class="comment"># [1,2,5,4]</span></span><br></pre></td></tr></table></figure><p><strong>17、</strong> 代码块作为参数是Ruby的一大亮点，也是初学者最看不懂的(说的是自己:anguished:)。在向方法发送消息时，代码块参数始终是最后一个。代码块可以使用do … end或{ … }</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">my_method <span class="keyword">do</span></span><br><span class="line">  <span class="comment"># ...</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">my_method {</span><br><span class="line">  <span class="comment"># ...</span></span><br><span class="line">}</span><br><span class="line"><span class="comment"># do...end 的优先级比 {...} 低</span></span><br><span class="line"><span class="comment"># 通常{ ... } 用在单行</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 传入的代码块也支持参数</span></span><br><span class="line">my_method <span class="keyword">do</span> |<span class="params">arg1, arg2</span>|</span><br><span class="line">  <span class="comment"># ...</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">my_method</span></span><br><span class="line">  r = <span class="keyword">yield</span>(<span class="number">1</span>,<span class="number">2</span>)  <span class="comment"># 用yield关键字可以调用代码块参数</span></span><br><span class="line">  puts r</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">my_method {|<span class="params">a,b</span>| a+b}  <span class="comment"># print 3</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># yield传参也可以不带括号</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">my_method</span></span><br><span class="line">  <span class="keyword">yield</span> <span class="variable language_">self</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">place = <span class="string">"world"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 分号后声明代码块内的局部变量</span></span><br><span class="line">my_method <span class="keyword">do</span> |<span class="params">obj; place</span>|</span><br><span class="line">  place = <span class="string">"block"</span> <span class="comment"># 这里的局部变量不会修改外面的变量</span></span><br><span class="line">  puts <span class="string">"hello <span class="subst">#{obj}</span> this is <span class="subst">#{place}</span>"</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">puts <span class="string">"place is: <span class="subst">#{place}</span>"</span>  <span class="comment"># 输出 place is: world</span></span><br></pre></td></tr></table></figure><blockquote><p>更多Ruby函数调用的内容可以参考<a target="_blank" rel="noopener" href="https://docs.ruby-lang.org/en/2.6.0/syntax/calling_methods_rdoc.html">官方文档</a></p></blockquote><p><strong>18、</strong> Ruby的控制流语句和C系列语言不同，代码块没有花括号，看到这我觉得Python的语法还是可以的，还有Ruby给它垫底:mask:</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">condition</span>(<span class="params">a</span>)</span><br><span class="line">    <span class="keyword">if</span> a == <span class="number">0</span></span><br><span class="line">      puts <span class="string">"a is zero"</span></span><br><span class="line">    <span class="keyword">elsif</span> a == <span class="number">1</span></span><br><span class="line">      puts <span class="string">"a is one"</span></span><br><span class="line">    <span class="keyword">elsif</span> a &gt;= <span class="number">2</span></span><br><span class="line">      puts <span class="string">"a is greater than two"</span></span><br><span class="line">      puts <span class="string">"or a equal to two"</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      puts <span class="string">"a is some other value"</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 除了if ... elsif ... else </span></span><br><span class="line"><span class="comment"># Ruby还有unless这种奇葩语法</span></span><br><span class="line"><span class="keyword">unless</span> <span class="literal">true</span></span><br><span class="line">  puts <span class="string">"the value is a false-value"</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment"># 等价于</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> <span class="literal">true</span></span><br><span class="line">  puts <span class="string">"the value is a false-value"</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment"># unless也可以与else结合使用</span></span><br><span class="line"><span class="keyword">unless</span> <span class="literal">true</span></span><br><span class="line">  puts <span class="string">"the value is false"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  puts <span class="string">"the value is true"</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># if 条件可以写在末尾</span></span><br><span class="line">a = <span class="number">0</span></span><br><span class="line">a += <span class="number">1</span> <span class="keyword">if</span> a.zero?</span><br><span class="line">p a <span class="comment"># print 1</span></span><br><span class="line"><span class="comment"># unless也一样</span></span><br><span class="line">a = <span class="number">0</span></span><br><span class="line">a += <span class="number">1</span> <span class="keyword">unless</span> a.zero?</span><br><span class="line">p a <span class="comment"># print 1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 循环语句</span></span><br><span class="line">a = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> a &lt; <span class="number">10</span> <span class="keyword">do</span></span><br><span class="line">  p a      <span class="comment"># 0，1，2，3，4，5，6，7，8，9</span></span><br><span class="line">  a += <span class="number">1</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">p a        <span class="comment"># 10</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># </span></span><br><span class="line">a = <span class="number">0</span></span><br><span class="line"><span class="keyword">until</span> a &gt; <span class="number">10</span> <span class="keyword">do</span></span><br><span class="line">  p a     <span class="comment"># 0，1，2，3，4，5，6，7，8，9，10</span></span><br><span class="line">  a += <span class="number">1</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">p a       <span class="comment"># 10</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># for循环</span></span><br><span class="line"><span class="keyword">for</span> value <span class="keyword">in</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>] <span class="keyword">do</span></span><br><span class="line">  puts value</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">for</span> value <span class="keyword">in</span> <span class="number">1</span>..<span class="number">3</span> <span class="keyword">do</span></span><br><span class="line">  puts value</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">for</span> (key,value) <span class="keyword">in</span> {<span class="symbol">k1:</span><span class="number">1</span>, <span class="symbol">k2:</span><span class="number">2</span>, <span class="symbol">k3:</span><span class="number">3</span>} <span class="keyword">do</span></span><br><span class="line">  puts <span class="string">"<span class="subst">#{key}</span>=&gt;<span class="subst">#{value}</span>"</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Java和JS使用forEach遍历时无法打断循环</span></span><br><span class="line"><span class="comment"># 但Ruby可以</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].each <span class="keyword">do</span> |<span class="params">value</span>|</span><br><span class="line">  <span class="keyword">break</span> <span class="keyword">if</span> value.even?</span><br><span class="line">  puts value</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment"># print 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Ruby中没有continue但有next</span></span><br><span class="line">result = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].map <span class="keyword">do</span> |<span class="params">value</span>|</span><br><span class="line">  <span class="keyword">next</span> <span class="keyword">if</span> value.even?</span><br><span class="line">  value * <span class="number">2</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">p result <span class="comment"># prints [2, nil, 6]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># next接受一个返回值</span></span><br><span class="line">result = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].map <span class="keyword">do</span> |<span class="params">value</span>|</span><br><span class="line">  <span class="keyword">next</span> value <span class="keyword">if</span> value.even?</span><br><span class="line">  value * <span class="number">2</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">p result <span class="comment"># prints [2, 2, 6]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>19、</strong> 类的定义，与类的属性</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Greeter</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">initialize</span>(<span class="params">name = <span class="string">"World"</span></span>)</span><br><span class="line">        <span class="variable">@name</span> = name</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">say_hi</span></span><br><span class="line">        puts <span class="string">"Hi <span class="subst">#{<span class="variable">@name</span>}</span>!"</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">say_bye</span></span><br><span class="line">        puts <span class="string">"Bye <span class="subst">#{<span class="variable">@name</span>}</span>, come back soon."</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">greeter = <span class="title class_">Greeter</span>.new(<span class="string">"Pat"</span>)</span><br><span class="line">greeter.say_hi   <span class="comment"># Hi Pat!</span></span><br><span class="line">greeter.say_bye  <span class="comment"># Bye Pat, come back soon.</span></span><br><span class="line"></span><br><span class="line">greeter.name   <span class="comment"># 报语法错误，不能直接访问实例变量</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 类允许定义多次，前面的定义会和后面的定义merge</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Greeter</span></span><br><span class="line">    <span class="built_in">attr_accessor</span> <span class="symbol">:name</span>  <span class="comment"># 指明name属性可以访问，相当于给name属性加了Getter/Setter</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">greeter.name</span><br><span class="line">greeter.name = <span class="string">'Andy'</span></span><br><span class="line">greeter.say_hi   <span class="comment"># Hi Andy</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 通常我们要限制属性的写操作</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">initialize</span>(<span class="params">name=<span class="string">"holmofy"</span>,age=<span class="number">0</span></span>)</span><br><span class="line">        <span class="variable">@name</span> = name</span><br><span class="line">        <span class="variable">@age</span> = age</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="comment"># getter</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">age</span></span><br><span class="line">        <span class="variable">@age</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    <span class="comment"># setter</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">age=</span>(<span class="params">age</span>)</span><br><span class="line">        <span class="keyword">if</span> age&lt;<span class="variable">@age</span></span><br><span class="line">            puts <span class="string">"Age can only grow"</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            puts <span class="string">"<span class="subst">#{<span class="variable">@name</span>}</span> grow up to <span class="subst">#{age}</span> years old"</span></span><br><span class="line">            <span class="variable">@age</span>=age</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p><strong>20、</strong> 类的继承和大多数语言一样</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> A</span><br><span class="line">  Z = <span class="number">1</span></span><br><span class="line">  <span class="keyword">def</span> <span class="title function_">z</span></span><br><span class="line">    Z</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> B &lt; A</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment"># 和大多数语言一样，子类允许调用父类的方法</span></span><br><span class="line">p B.new.z <span class="comment">#=&gt; 1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> A</span><br><span class="line">  <span class="keyword">def</span> <span class="title function_">m</span></span><br><span class="line">    <span class="number">1</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> B &lt; A</span><br><span class="line">  <span class="comment"># 子类可以重写父类的方法</span></span><br><span class="line">  <span class="keyword">def</span> <span class="title function_">m</span></span><br><span class="line">    <span class="number">2</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> B &lt; A</span><br><span class="line">  <span class="keyword">def</span> <span class="title function_">m</span></span><br><span class="line">    <span class="number">2</span> + <span class="variable language_">super</span>  <span class="comment"># 如果想要调用父类的同名方法可以使用super关键字</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">p B.new.m <span class="comment">#=&gt; 3</span></span><br></pre></td></tr></table></figure><blockquote><p>最后吐槽一下：排名低就是有排名低的理由，和排名前十的语言相比感觉还是差了点。</p></blockquote></div><div class="article-copyright"><p>本作品采用 <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by/4.0/">知识共享署名 4.0 国际许可协议</a> 进行许可。</p><p>转载时请注明<a href="https://blog.hufeifei.cn/2019/01/Ruby/%E4%B8%80%E6%9E%9AJaver%E5%AF%B9Ruby%E7%9A%84%E5%90%90%E6%A7%BD/">原文链接</a>：https://blog.hufeifei.cn/2019/01/Ruby/%E4%B8%80%E6%9E%9AJaver%E5%AF%B9Ruby%E7%9A%84%E5%90%90%E6%A7%BD/</p></div><footer class="article-footer"></footer></div><div id="article-reward"><i class="iconfont ic-money"></i><div>鼓励一下</div><table><thead><tr><th style="text-align:center">支付宝</th><th style="text-align:center">微信</th></tr></thead><tbody><tr><td style="text-align:center"><img width="150" src="https://www.hufeifei.cn/reward-img/alipay.jpg"></td><td style="text-align:center"><img width="135" src="https://www.hufeifei.cn/reward-img/wechat.jpg"></td></tr></tbody></table></div><nav id="article-nav"><a class="article-nav-link-wrap" href="/2019/02/J2EE/SpringDataRedis/" id="article-nav-newer"><strong class="article-nav-caption">Newer</strong><div class="article-nav-title">SpringDataRedis踩坑记录</div></a><a class="article-nav-link-wrap" href="/2018/12/Java/jvm-gc/" id="article-nav-older"><strong class="article-nav-caption">Older</strong><div class="article-nav-title">垃圾回收算法与JVM内存管理</div></a></nav></article><div id="waline-comments"></div><script type="module">import { init } from 'https://unpkg.com/@waline/client@v3/dist/waline.js';init({"el":"#waline-comments","pageview":true,"enable":true,"serverURL":"https://api.waline.blog.hufeifei.cn","avatar":"mp","pageSize":10,"lang":"zh-cn","placeholder":"Just go go","visitor":true,"recordIP":true,"requiredFields":["nick"]});</script></section><aside id="sidebar"><div class="widget-wrap"><h3 class="widget-title">关注微信公众号</h3><div class="widget wechat"><img src="//www.hufeifei.cn/wechat-public-account.jpg"></div></div><div class="widget-wrap"><h3 class="widget-title">Categories</h3><div class="widget"><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/">Android</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/C-C/">C&C++</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/J2EE/">J2EE</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/JAVA/">JAVA</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux%E8%BF%90%E7%BB%B4/">Linux运维</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Ruby/">Ruby</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Rust/">Rust</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Windows/">Windows</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E4%BB%A3%E7%A0%81%E6%97%A5%E5%B8%B8/">代码日常</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%88%86%E5%B8%83%E5%BC%8F/">分布式</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%95%86%E4%B8%9A/">商业</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/">数据结构与算法</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%94%9F%E6%B4%BB/">生活</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%AE%97%E6%B3%95/">算法</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%BB%8F%E6%B5%8E%E4%B8%8E%E9%87%91%E8%9E%8D/">经济与金融</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%BD%91%E7%BB%9C/">网络</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90/">计算机组成</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%9D%A2%E8%AF%95/">面试</a></li></ul></div></div><div class="widget-wrap"><h3 class="widget-title">Tag Cloud</h3><div class="widget tagcloud"><a href="/tags/AVL/" style="font-size:11.11px">AVL</a> <a href="/tags/Alibaba/" style="font-size:14.44px">Alibaba</a> <a href="/tags/Android/" style="font-size:18.89px">Android</a> <a href="/tags/B-Tree/" style="font-size:12.22px">B-Tree</a> <a href="/tags/BKD-Tree/" style="font-size:10px">BKD-Tree</a> <a href="/tags/BST/" style="font-size:10px">BST</a> <a href="/tags/BigData/" style="font-size:11.11px">BigData</a> <a href="/tags/C/" style="font-size:14.44px">C</a> <a href="/tags/CGlib/" style="font-size:10px">CGlib</a> <a href="/tags/CS/" style="font-size:11.11px">CS</a> <a href="/tags/Canal/" style="font-size:10px">Canal</a> <a href="/tags/ClassLoader/" style="font-size:10px">ClassLoader</a> <a href="/tags/ClickHouse/" style="font-size:10px">ClickHouse</a> <a href="/tags/Config/" style="font-size:10px">Config</a> <a href="/tags/Cryptography/" style="font-size:10px">Cryptography</a> <a href="/tags/DB/" style="font-size:20px">DB</a> <a href="/tags/Dapper/" style="font-size:10px">Dapper</a> <a href="/tags/DataStructure/" style="font-size:14.44px">DataStructure</a> <a href="/tags/Debezium/" style="font-size:10px">Debezium</a> <a href="/tags/Diamond/" style="font-size:10px">Diamond</a> <a href="/tags/Distributed/" style="font-size:13.33px">Distributed</a> <a href="/tags/ElasticSearch/" style="font-size:10px">ElasticSearch</a> <a href="/tags/Encoding/" style="font-size:10px">Encoding</a> <a href="/tags/FastJson/" style="font-size:10px">FastJson</a> <a href="/tags/File/" style="font-size:10px">File</a> <a href="/tags/FlowMarketing/" style="font-size:10px">FlowMarketing</a> <a href="/tags/Grade/" style="font-size:10px">Grade</a> <a href="/tags/Gson/" style="font-size:10px">Gson</a> <a href="/tags/HTTP/" style="font-size:10px">HTTP</a> <a href="/tags/Handler/" style="font-size:10px">Handler</a> <a href="/tags/Hanlder/" style="font-size:10px">Hanlder</a> <a href="/tags/Hessian/" style="font-size:10px">Hessian</a> <a href="/tags/IO-Multiplex/" style="font-size:10px">IO-Multiplex</a> <a href="/tags/JAVA/" style="font-size:18.89px">JAVA</a> <a href="/tags/JVM/" style="font-size:10px">JVM</a> <a href="/tags/KD-Tree/" style="font-size:10px">KD-Tree</a> <a href="/tags/KDB-Tree/" style="font-size:10px">KDB-Tree</a> <a href="/tags/Kafka/" style="font-size:10px">Kafka</a> <a href="/tags/Kubernetes/" style="font-size:10px">Kubernetes</a> <a href="/tags/LSM-Tree/" style="font-size:11.11px">LSM-Tree</a> <a href="/tags/Linux/" style="font-size:17.78px">Linux</a> <a href="/tags/Lock/" style="font-size:11.11px">Lock</a> <a href="/tags/Lucene/" style="font-size:10px">Lucene</a> <a href="/tags/MQ/" style="font-size:10px">MQ</a> <a href="/tags/Macro/" style="font-size:10px">Macro</a> <a href="/tags/Magisk/" style="font-size:10px">Magisk</a> <a href="/tags/MultiDex/" style="font-size:10px">MultiDex</a> <a href="/tags/MySQL/" style="font-size:17.78px">MySQL</a> <a href="/tags/NIO/" style="font-size:10px">NIO</a> <a href="/tags/Nginx/" style="font-size:11.11px">Nginx</a> <a href="/tags/OGNL/" style="font-size:10px">OGNL</a> <a href="/tags/OpenResty/" style="font-size:10px">OpenResty</a> <a href="/tags/OpenTelemetry/" style="font-size:10px">OpenTelemetry</a> <a href="/tags/Oracle/" style="font-size:10px">Oracle</a> <a href="/tags/PostgreSQL/" style="font-size:10px">PostgreSQL</a> <a href="/tags/RB-Tree/" style="font-size:10px">RB-Tree</a> <a href="/tags/Redis/" style="font-size:10px">Redis</a> <a href="/tags/Rust/" style="font-size:10px">Rust</a> <a href="/tags/Sharding/" style="font-size:10px">Sharding</a> <a href="/tags/SpringBoot/" style="font-size:10px">SpringBoot</a> <a href="/tags/SpringCloud/" style="font-size:10px">SpringCloud</a> <a href="/tags/SpringCloudConfig/" style="font-size:10px">SpringCloudConfig</a> <a href="/tags/Sqlite/" style="font-size:10px">Sqlite</a> <a href="/tags/SurfaceView/" style="font-size:10px">SurfaceView</a> <a href="/tags/VSCode/" style="font-size:11.11px">VSCode</a> <a href="/tags/WebFlux/" style="font-size:10px">WebFlux</a> <a href="/tags/WebPush/" style="font-size:10px">WebPush</a> <a href="/tags/Web%E6%8C%96%E6%8E%98/" style="font-size:11.11px">Web挖掘</a> <a href="/tags/awk/" style="font-size:10px">awk</a> <a href="/tags/bit-hack/" style="font-size:10px">bit-hack</a> <a href="/tags/cheat-sheet/" style="font-size:10px">cheat sheet</a> <a href="/tags/curl/" style="font-size:10px">curl</a> <a href="/tags/epoll/" style="font-size:10px">epoll</a> <a href="/tags/gRPC/" style="font-size:10px">gRPC</a> <a href="/tags/grep/" style="font-size:10px">grep</a> <a href="/tags/kqueue/" style="font-size:10px">kqueue</a> <a href="/tags/libev/" style="font-size:10px">libev</a> <a href="/tags/libevent/" style="font-size:10px">libevent</a> <a href="/tags/libuv/" style="font-size:10px">libuv</a> <a href="/tags/metaq/" style="font-size:10px">metaq</a> <a href="/tags/poll/" style="font-size:10px">poll</a> <a href="/tags/sed/" style="font-size:10px">sed</a> <a href="/tags/select/" style="font-size:10px">select</a> <a href="/tags/ssh/" style="font-size:10px">ssh</a> <a href="/tags/%E5%8E%86%E5%8F%B2/" style="font-size:10px">历史</a> <a href="/tags/%E5%95%86%E4%B8%9A/" style="font-size:10px">商业</a> <a href="/tags/%E5%BF%83%E7%90%86%E5%AD%A6/" style="font-size:10px">心理学</a> <a href="/tags/%E7%94%9F%E6%B4%BB/" style="font-size:11.11px">生活</a> <a href="/tags/%E7%A8%8E%E6%94%B6/" style="font-size:10px">税收</a> <a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size:14.44px">算法</a> <a href="/tags/%E7%BB%8F%E6%B5%8E/" style="font-size:15.56px">经济</a> <a href="/tags/%E8%90%A5%E9%94%80/" style="font-size:10px">营销</a> <a href="/tags/%E8%B4%A7%E5%B8%81/" style="font-size:10px">货币</a> <a href="/tags/%E9%9A%8F%E7%AC%94/" style="font-size:16.67px">随笔</a></div></div><div class="widget-wrap"><h3 class="widget-title">Recent Posts</h3><div class="widget"><ul><li><a href="/2024/04/economic/value-added-tax/">增值税与贫富差距</a></li><li><a href="/2024/01/Net/x-forward-for/">“真”的IP真的是真的吗？</a></li><li><a href="/2024/01/paper/MarkupLM-web-extract/">【译】基于MarkupLM的web数据抽取</a></li><li><a href="/2023/09/economic/tax-reform/">直接税改革——王朝周期律的胜负手</a></li><li><a href="/2023/09/Rust/macro-rules-learning/">Rust中的宏</a></li></ul></div></div><div class="widget-wrap"><h3 class="widget-title">网站运营不易</h3><div class="ads-wrapper"><div class="google_ads"><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-7111912103882824" data-ad-slot="8429272980" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div></div></div></aside></div><footer id="footer"><div class="outer"><div class="inner" id="footer-info"><p><a href="https://beian.miit.gov.cn/" target="_blank">赣ICP备17009276号</a><i class="far fa-copyright"></i>2016 ~ 2024 胡飞飞</p><p>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a><i class="fas fa-angle-right"></i>Theme by <a target="_blank" rel="noopener" href="https://github.com/holmofy/hexo-theme-paper">paper</a></p></div></div></footer></div><nav id="mobile-nav"><a class="mobile-nav-link" href="//www.hufeifei.cn">主页</a><a class="mobile-nav-link" href="/">博客</a><a class="mobile-nav-link" href="/archives">归档</a><a class="mobile-nav-link" target="_blank" rel="noopener" href="//algo.hufeifei.cn">算法</a><a class="mobile-nav-link" href="/book">书籍</a><a class="mobile-nav-link" href="/github">Github</a></nav><script src="//cdnjs.loli.net/ajax/libs/jquery/3.0.0/jquery.min.js"></script><link rel="stylesheet" href="//cdnjs.loli.net/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css"><script type="text/javascript" src="//cdnjs.loli.net/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js"></script><script type="text/javascript" src="/js/script.js"></script></div><script>
  $(document).ready(function() {
    $('figure.codeblock').find('.tab').click(function() {
        var $codeblock = $(this).parent().parent().parent();
        var $tab = $(this);
        // remove "active" css class on all tabs
        $tab.siblings().removeClass('active');
        // add "active" css class on the clicked tab
        $tab.addClass('active');
        // hide all tab contents
        $codeblock.find('.highlight').hide();
        // show only the right one
        $codeblock.find('.highlight.' + $tab.text()).show();
    });
  });
  </script><script>(function (w, d, s, id) {
            if (typeof (w.webpushr) !== 'undefined') return; w.webpushr = w.webpushr || function () { (w.webpushr.q = w.webpushr.q || []).push(arguments) }; var js, fjs = d.getElementsByTagName(s)[0]; js = d.createElement(s); js.id = id; js.async = 1; js.src = "https://cdn.webpushr.com/app.min.js";fjs.parentNode.appendChild(js);}(window, document, 'script', 'webpushr-jssdk'));webpushr('setup', { 'key': 'BPJzNs1QEtbYa3Bn0gMAQHBAzX3Jm71llGUKHTkKEUs3D9xiDYZ0DWJ3S9sfCAAJHxXEoBkUANFyONjeIlgrJUo'' });</script></body></html>
---
title: SysVinit -> Upstart -> Systemd
date: 2025-04-08
categories: Linuxè¿ç»´
tags: Linux
---

æˆ‘è®°å¾—å¾ˆæ—©ä¹‹å‰ï¼Œæˆ‘å†™è¿‡ä¸€ç¯‡[æ–‡ç« ](https://blog.hufeifei.cn/2017/04/Linux/CentOS-7-Systemd/)ï¼Œä»‹ç»CentOSä¸­å¼•å…¥çš„Systemdï¼Œåé¢æˆ‘åˆ[ä»CentOSåˆ‡æ¢åˆ°äº†Debian](https://blog.hufeifei.cn/2025/02/Linux/debian/)ï¼Œä»Šå¤©æœåŠ¡å™¨åˆç¢°åˆ°äº†ä¸€ä¸ªäº‹æ•…ï¼Œç”¨ChatGPTé‡æ¸©äº†ä¸€ä¸‹Systemdçš„æ¼”å˜å†å²ã€‚

Linux å¯åŠ¨ç³»ç»Ÿï¼ˆinit systemï¼‰çš„æ¼”è¿›è¿‡ç¨‹ä½“ç°äº† Linux ä»â€œèƒ½ç”¨â€åˆ°â€œé«˜æ•ˆç°ä»£â€çš„é‡å¤§å˜é©ã€‚

| å‘è¡Œç‰ˆ           | åˆæœŸä½¿ç”¨     | è¿‡æ¸¡æœŸ         | ç°ä»Šä½¿ç”¨                  |
| ------------- | -------- | ----------- | --------------------- |
| Debian        | SysVinit | Upstartï¼ˆçŸ­æš‚ï¼‰ | systemdï¼ˆä» Debian 8 èµ·ï¼‰ |
| Ubuntu        | SysVinit | Upstart     | systemdï¼ˆä» 15.04 èµ·ï¼‰    |
| CentOS / RHEL | SysVinit | -           | systemdï¼ˆä» 7 èµ·ï¼‰        |
| Arch Linux    | SysVinit | -           | systemdï¼ˆä» 2012 èµ·ï¼‰     |

ä¸‹é¢ä»å†å²èƒŒæ™¯ã€è®¾è®¡åŠ¨å› ã€å…³é”®æŠ€æœ¯å˜åŒ–ã€å½±å“ç­‰å¤šä¸ªè§’åº¦ï¼Œè¯¦ç»†è®²è§£ï¼š

---

## ğŸ•°ï¸ ä¸€ã€SysVinitï¼šç»å…¸ä½†è€æ—§ï¼ˆ1980s - \~2010ï¼‰

### ğŸ“Œ èƒŒæ™¯

* èµ·æºäº UNIX System Vï¼ŒLinux å€Ÿé‰´ä½¿ç”¨ã€‚
* æ˜¯ Linux åœ¨ 1990s åˆ° 2000s æœŸé—´çš„ä¸»æµ init ç³»ç»Ÿã€‚

### âš™ï¸ ç‰¹ç‚¹

* å¯åŠ¨è„šæœ¬ï¼šä½äº `/etc/init.d/`ï¼Œæ¯ä¸ªæœåŠ¡ä¸€ä¸ªè„šæœ¬ã€‚
* æ§åˆ¶å¯åŠ¨é¡ºåºé è½¯é“¾æ¥ï¼šå¦‚ `/etc/rc5.d/S20nginx`
* è¿è¡Œçº§åˆ«ï¼ˆrunlevelï¼‰æ§åˆ¶ç³»ç»ŸçŠ¶æ€ï¼Œä¾‹å¦‚ï¼š

  * 1ï¼šå•ç”¨æˆ·æ¨¡å¼
  * 3ï¼šæ–‡æœ¬å¤šç”¨æˆ·
  * 5ï¼šå›¾å½¢ç•Œé¢

### âš ï¸ é—®é¢˜

1. **ä¸²è¡Œå¯åŠ¨**ï¼Œé€Ÿåº¦æ…¢ã€‚
2. **æ— ä¾èµ–ç®¡ç†**ï¼Œè„šæœ¬é äººä¸ºå®‰æ’æ‰§è¡Œé¡ºåºã€‚
3. **æœåŠ¡æ— ç›‘æ§æœºåˆ¶**ï¼Œå´©äº†ä¸ä¼šè‡ªåŠ¨æ‹‰èµ·ã€‚
4. **è„šæœ¬ä¸ç»Ÿä¸€**ï¼Œéš¾ç»´æŠ¤ã€éš¾è°ƒè¯•ã€‚

---

## ğŸ” äºŒã€Upstartï¼šå‘äº‹ä»¶é©±åŠ¨æ¼”è¿›ï¼ˆ2006 - \~2014ï¼‰

### ğŸ“Œ èƒŒæ™¯

* Ubuntu å¼€å‘ï¼Œä¸ºäº†è§£å†³ SysVinit çš„æ€§èƒ½ä¸ç®¡ç†ç“¶é¢ˆã€‚
* æœ€åˆç”¨äº Ubuntu 6.10ï¼ˆ2006ï¼‰ï¼Œä¸€ç›´ç”¨åˆ° Ubuntu 14.10ã€‚

### âš™ï¸ ç‰¹ç‚¹

* **äº‹ä»¶é©±åŠ¨æ¨¡å‹**ï¼šæ¯”å¦‚â€œç½‘ç»œä¸Šçº¿â€ã€â€œç£ç›˜æŒ‚è½½å®Œæˆâ€ä½œä¸ºæœåŠ¡å¯åŠ¨çš„æ¡ä»¶ã€‚
* **å¼‚æ­¥å¯åŠ¨æœåŠ¡**ï¼Œå¹¶è¡Œåº¦æ›´é«˜ã€‚
* å‘åå…¼å®¹ `/etc/init.d/` è„šæœ¬ã€‚

### ğŸ“„ é…ç½®æ–‡ä»¶

é…ç½®æ–‡ä»¶ä½äº `/etc/init/`ï¼Œå¦‚ï¼š

```bash
start on filesystem and net-device-up IFACE=eth0
stop on runlevel [!2345]
exec /usr/sbin/sshd
```

### ğŸ‘ ä¼˜ç‚¹

* å¯åŠ¨å¿«ï¼›
* æ›´æ™ºèƒ½çš„æœåŠ¡å¯åŠ¨æ¡ä»¶ï¼›
* åˆæ­¥å¼•å…¥æœåŠ¡çŠ¶æ€æŸ¥è¯¢ï¼ˆ`start`/`stop`/`status`ï¼‰ã€‚

### âš ï¸ ç¼ºç‚¹

1. **äº‹ä»¶æ¨¡å‹å¤æ‚**ï¼Œè°ƒè¯•å›°éš¾ï¼›
2. **ä¸ç»Ÿä¸€**ï¼šæ—¥å¿—ã€æŒ‚è½½ç­‰è¿˜æ˜¯ç”¨å…¶ä»–å·¥å…·ï¼›
3. **ä¾èµ–é“¾åˆ†æå¼±**ï¼›
4. **Red Hat æœªé‡‡çº³**ï¼Œç”Ÿæ€å½±å“åŠ›æœ‰é™ã€‚

---

## ğŸš€ ä¸‰ã€systemdï¼šç°ä»£åˆå§‹åŒ–ç³»ç»Ÿï¼ˆ2010 - è‡³ä»Šï¼‰

### ğŸ“Œ èƒŒæ™¯

* ç”± Red Hat çš„ Lennart Poettering å’Œ Kay Sievers å¼€å‘ã€‚
* æ—¨åœ¨ç»Ÿä¸€ Linux çš„æœåŠ¡ã€æŒ‚è½½ã€æ—¥å¿—ã€ä¼šè¯ç­‰ç³»ç»Ÿç»„ä»¶ã€‚
* 2010 å¹´é¦–æ¬¡å‘å¸ƒï¼Œå¿«é€Ÿæˆä¸ºä¸»æµï¼ˆDebianã€Red Hatã€Arch å…¨éƒ¨è¿ç§»ï¼‰ã€‚

### ğŸ§  è®¾è®¡ç†å¿µ

* ä¸€åˆ‡éƒ½æ˜¯ unitï¼ˆå•å…ƒï¼‰ï¼šæœåŠ¡ã€æŒ‚è½½ç‚¹ã€socketã€è®¾å¤‡ã€è®¡æ—¶å™¨â€¦â€¦
* ç»Ÿä¸€ç®¡ç†ã€å¹¶å‘å¯åŠ¨ã€çŠ¶æ€è¿½è¸ªã€è‡ªåŠ¨é‡å¯ã€cgroup é™åˆ¶ã€æ—¥å¿—æ”¶é›†ã€‚

### âš™ï¸ é‡å¤§æŠ€æœ¯ç‰¹ç‚¹

| ç‰¹æ€§           | æè¿°                                       |
| ------------ | ---------------------------------------- |
| å¹¶è¡Œå¯åŠ¨         | åˆ©ç”¨æœåŠ¡ä¾èµ–å›¾ï¼ˆä¾èµ–è§£æï¼‰+ å¹¶å‘æ‰§è¡Œï¼Œå¤§å¹…æå‡å¯åŠ¨é€Ÿåº¦             |
| å•å…ƒæ–‡ä»¶ï¼ˆUnitï¼‰   | `.service`ã€`.mount`ã€`.socket` ç­‰æ ¼å¼ç»Ÿä¸€çš„é…ç½®æ–‡ä»¶ |
| çŠ¶æ€ç®¡ç†         | æ‰€æœ‰æœåŠ¡éƒ½æœ‰çŠ¶æ€ï¼ˆactive, failed, deadï¼‰å¯æ§         |
| `journalctl` | å†…ç½®æ—¥å¿—ç³»ç»Ÿï¼ŒæœåŠ¡æ—¥å¿—é›†ä¸­ã€ç»“æ„åŒ–                        |
| Socket æ¿€æ´»    | ç±»ä¼¼ xinetdï¼ŒæœåŠ¡æŒ‰éœ€è‡ªåŠ¨æ¿€æ´»                       |
| D-Bus é›†æˆ     | æœåŠ¡å¯ä»¥é€šè¿‡ D-Bus åŠ¨æ€æ¿€æ´»                        |
| CGroup ç®¡ç†    | ä½¿ç”¨ Linux Control Groups é™åˆ¶èµ„æºï¼Œç³»ç»Ÿçº§æ²™ç®±æ§åˆ¶     |
| `timer` å•å…ƒ   | æ›¿ä»£ cronï¼Œæ”¯æŒç²¾å‡†è°ƒåº¦ã€ä¾èµ–æ‰§è¡Œ                      |

### ğŸ“„ é…ç½®æ–‡ä»¶ä¾‹å­ï¼ˆnginx.serviceï¼‰ï¼š

```ini
[Unit]
Description=NGINX web server
After=network.target

[Service]
ExecStart=/usr/sbin/nginx
ExecReload=/usr/sbin/nginx -s reload
ExecStop=/usr/sbin/nginx -s quit
Restart=on-failure

[Install]
WantedBy=multi-user.target
```

### ğŸ‘ ä¼˜ç‚¹

1. å¯åŠ¨å¿«ã€ä¾èµ–æ˜ç¡®ï¼›
2. ç®¡ç†ç»Ÿä¸€ã€å·¥å…·å®Œå–„ï¼ˆsystemctlã€journalctlï¼‰ï¼›
3. æœåŠ¡æ›´ç¨³å®šå¯é ï¼ˆå¤±è´¥é‡å¯ã€å¥åº·æ£€æŸ¥ï¼‰ï¼›
4. æ”¯æŒç°ä»£ Linux ç‰¹æ€§ï¼ˆå®¹å™¨ã€æ²™ç®±ã€ç”¨æˆ·æœåŠ¡ç­‰ï¼‰ï¼›

### âš ï¸ æ‰¹è¯„ä¸äº‰è®®

* è®¾è®¡å¤æ‚ã€æ¨¡å—åºå¤§ï¼Œæœ‰äººè§‰å¾—å®ƒ\*\*â€œè¿èƒŒ Unix å“²å­¦â€\*\*ï¼›
* ç ´åå…¼å®¹æ€§ï¼Œè€å·¥å…·å’Œè„šæœ¬éœ€è¦è¿ç§»ï¼›
* å¤ªå¼ºåŠ¿ï¼šæ›¿ä»£äº† cronã€syslogã€init ç­‰å¤šä¸ªå·¥å…·ã€‚

---

## ğŸ“Š æ¼”è¿›è·¯å¾„ä¸€è§ˆè¡¨

| å¹´ä»£      | ç³»ç»Ÿ       | ä¸»å¯¼è€…           | ç‰¹ç‚¹ç®€è¿°              |
| ------- | -------- | ------------- | ----------------- |
| \~1980s | SysVinit | UNIX System V | è„šæœ¬é©±åŠ¨ã€è¿è¡Œçº§åˆ«ã€ä¸²è¡Œå¯åŠ¨    |
| 2006    | Upstart  | Ubuntu        | äº‹ä»¶é©±åŠ¨ã€å¼‚æ­¥å¯åŠ¨ã€å…¼å®¹ SysV |
| 2010 è‡³ä»Š | systemd  | Red Hat       | å¹¶å‘å¯åŠ¨ã€ç»Ÿä¸€ç®¡ç†ã€ç°ä»£ç‰¹æ€§ä¸°å¯Œ  |

---

## ğŸ§© æ€»ç»“å¯¹æ¯”

| ç‰¹æ€§        | SysVinit  | Upstart   | systemd         |
| --------- | --------- | --------- | --------------- |
| å¯åŠ¨æ–¹å¼      | ä¸²è¡Œ        | äº‹ä»¶é©±åŠ¨ + å¼‚æ­¥ | ä¾èµ–é©±åŠ¨ + å¹¶å‘å¯åŠ¨     |
| é…ç½®æ–¹å¼      | Shell è„šæœ¬  | è‡ªå®šä¹‰è¯­æ³•     | INI é£æ ¼ unit æ–‡ä»¶  |
| æœåŠ¡ç›‘æ§      | æ—          | æœ‰é™        | å®Œå–„ï¼ˆè‡ªåŠ¨é‡å¯ã€çŠ¶æ€ï¼‰     |
| æ—¥å¿—æ”¯æŒ      | å¤–éƒ¨ syslog | å¤–éƒ¨ syslog | å†…ç½® `journalctl` |
| æœåŠ¡ä¾èµ–ç®¡ç†    | é äººä¸ºè½¯é“¾æ¥é¡ºåº  | åˆæ­¥æ”¯æŒ      | å¼ºä¾èµ–å›¾æ”¯æŒ          |
| socket æ¿€æ´» | æ—          | æ”¯æŒ        | æ”¯æŒ              |
| ç”Ÿæ€å…¼å®¹      | é«˜         | ä¸€èˆ¬        | æœ‰ç ´åæ€§ï¼Œå½±å“å¹¿æ³›       |

---

åœ¨ Linux ä» **SysVinit â†’ Upstart â†’ systemd** çš„æ¼”è¿›è¿‡ç¨‹ä¸­ï¼Œ**è¿ç»´å‘½ä»¤å’Œæ€ç»´æ–¹å¼ä¹Ÿå‘ç”Ÿäº†é‡å¤§å˜é©**ã€‚è¿™äº›å˜é©ä¸ä»…ä»…æ˜¯å‘½ä»¤åç§°çš„å˜åŒ–ï¼Œæ›´æ˜¯**ç³»ç»Ÿæ§åˆ¶ç†å¿µã€æœåŠ¡ç®¡ç†æ–¹å¼ã€æ—¥å¿—å¤„ç†æ–¹æ³•å’Œè‡ªåŠ¨åŒ–èƒ½åŠ›çš„è´¨å˜**ã€‚

## ğŸ§± ä¸€ã€SysVinit æ—¶ä»£ï¼ˆä¼ ç»Ÿè„šæœ¬å¼è¿ç»´ï¼‰

### ğŸ§° è¿ç»´å‘½ä»¤ï¼ˆåˆ†å‘å¼ã€æ‰‹å·¥åŒ–ï¼‰ï¼š

```bash
# å¯åŠ¨æœåŠ¡
/etc/init.d/sshd start

# åœæ­¢æœåŠ¡
/etc/init.d/sshd stop

# æŸ¥çœ‹æœåŠ¡æ˜¯å¦è¿è¡Œï¼ˆé€šå¸¸è¦é  psï¼‰
ps aux | grep nginx

# æŸ¥çœ‹æ—¥å¿—ï¼ˆåªèƒ½çœ‹ log æ–‡ä»¶ï¼‰
tail -f /var/log/messages
tail -f /var/log/nginx/access.log

# è®¾ç½®å¼€æœºå¯åŠ¨
chkconfig sshd on           # RedHatç³»
update-rc.d sshd defaults   # Debianç³»
```

### ğŸ§© ç‰¹ç‚¹ï¼š

* å‘½ä»¤é£æ ¼åˆ†å‘å¼ï¼Œæ¯ä¸ªå‘½ä»¤ç®¡ç†ä¸€ä¸ªåŠŸèƒ½ï¼ˆchkconfigã€serviceã€psã€tailï¼‰ã€‚
* å„ç§è¡Œä¸ºé è„šæœ¬æˆ–æ‰‹åŠ¨ç»„åˆã€‚
* æ²¡æœ‰ç»Ÿä¸€â€œæœåŠ¡çŠ¶æ€â€å’Œâ€œæ—¥å¿—ç®¡ç†â€çš„æ¦‚å¿µã€‚

---

## ğŸ” äºŒã€Upstart æ—¶ä»£ï¼ˆäº‹ä»¶é©±åŠ¨ï¼Œå‘½ä»¤åˆæ­¥ç»Ÿä¸€ï¼‰

### ğŸ§° è¿ç»´å‘½ä»¤ï¼š

```bash
# å¯åŠ¨æœåŠ¡
start ssh

# åœæ­¢æœåŠ¡
stop ssh

# é‡å¯æœåŠ¡
restart ssh

# æŸ¥çœ‹çŠ¶æ€
status ssh

# é…ç½®æ–‡ä»¶ï¼š/etc/init/ssh.conf
```

### ğŸ§© ç‰¹ç‚¹ï¼š

* å‘½ä»¤æ›´ç»Ÿä¸€ï¼Œä½†ä»…é™ Upstart æœåŠ¡ï¼›
* æ—¥å¿—ä»ç„¶é ä¼ ç»Ÿ syslogï¼›
* æœåŠ¡ä¾ç„¶ä¸èƒ½â€œè‡ªæ„ˆâ€ï¼Œä¸å…·å¤‡è‡ªåŠ¨é‡å¯ç­‰èƒ½åŠ›ï¼›
* æŸäº›æœåŠ¡ä»å¾—é€šè¿‡ `/etc/init.d/` æ§åˆ¶ã€‚

---

## ğŸš€ ä¸‰ã€systemd æ—¶ä»£ï¼ˆé›†ä¸­ç®¡ç†ã€çŠ¶æ€æ„ŸçŸ¥ã€è‡ªåŠ¨åŒ–ï¼‰

### ğŸ§° æ ¸å¿ƒå‘½ä»¤ï¼š`systemctl`ï¼ˆç»Ÿä¸€æ¥å£ï¼‰

```bash
# å¯åŠ¨ / åœæ­¢ / é‡å¯æœåŠ¡
systemctl start nginx
systemctl stop nginx
systemctl restart nginx

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€ï¼ˆéå¸¸è¯¦ç»†ï¼‰
systemctl status nginx

# è®¾ç½®æœåŠ¡å¼€æœºå¯åŠ¨
systemctl enable nginx

# ç¦ç”¨å¼€æœºå¯åŠ¨
systemctl disable nginx

# é‡æ–°åŠ è½½æœåŠ¡é…ç½®
systemctl daemon-reexec
```

### ğŸ§¾ æ—¥å¿—ç»Ÿä¸€ï¼š`journalctl`

```bash
# æŸ¥çœ‹æŸæœåŠ¡æ—¥å¿—
journalctl -u nginx

# æŸ¥çœ‹æœ€è¿‘æ—¥å¿—ï¼ˆè‡ªåŠ¨åˆ†é¡µï¼‰
journalctl -xe

# å®æ—¶æŸ¥çœ‹æ—¥å¿—ï¼ˆtail æ¨¡å¼ï¼‰
journalctl -fu nginx

# å¼€æœºä»¥æ¥æ‰€æœ‰æ—¥å¿—
journalctl -b
```

### âš™ï¸ ç³»ç»Ÿå±‚çº§æ§åˆ¶

```bash
# æ˜¾ç¤ºå½“å‰ç³»ç»Ÿè¿è¡ŒçŠ¶æ€
systemctl is-system-running

# è®¾ç½®é»˜è®¤å¯åŠ¨ç›®æ ‡ï¼ˆç›¸å½“äºè¿è¡Œçº§åˆ«ï¼‰
systemctl set-default multi-user.target
```

---

## ğŸ” è¿ç»´è§†è§’çš„é‡å¤§å˜åŒ–æ€»ç»“

| å˜åŒ–ç‚¹       | SysVinit                | systemd                              | æ”¹å˜ä»·å€¼       |
| --------- | ----------------------- | ------------------------------------ | ---------- |
| å¯åœå‘½ä»¤      | è„šæœ¬è°ƒç”¨                    | ç»Ÿä¸€ systemctl                         | æ˜“äºè®°å¿†ï¼Œç»Ÿä¸€ç®¡ç†  |
| æœåŠ¡çŠ¶æ€      | åŸºæœ¬æ—                      | å¤šçŠ¶æ€ï¼ˆactiveã€failedç­‰ï¼‰                  | æ›´ç²¾ç»†çš„è¿ç»´åé¦ˆ   |
| å¼€æœºå¯åŠ¨ç®¡ç†    | chkconfig / update-rc.d | systemctl enable/disable             | ç®€æ´ã€å¼ºå¤§ã€ç»Ÿä¸€   |
| æ—¥å¿—ç®¡ç†      | syslogã€tail æ–‡ä»¶          | journalctl                           | ç»“æ„åŒ–ã€æŸ¥è¯¢æ›´å¼º   |
| è‡ªåŠ¨é‡å¯æœåŠ¡    | æ—                        | Restart=on-failure ç­‰é€‰é¡¹               | æœåŠ¡è‡ªæ„ˆèƒ½åŠ›     |
| å¹¶å‘å¯åŠ¨ä¸ä¾èµ–ç®¡ç† | æ— ï¼Œé è„šæœ¬é¡ºåº                 | å†…å»ºä¾èµ–æ ‘ä¸å¹¶å‘è°ƒåº¦                           | å¯åŠ¨æ›´å¿«ã€å¯é æ€§æ›´å¼º |
| ç³»ç»Ÿèµ„æºéš”ç¦»    | æ—                        | ä½¿ç”¨ CGroup                            | æœåŠ¡ç²’åº¦èµ„æºç®¡æ§   |
| è¿ç»´è‡ªåŠ¨åŒ–     | å¤æ‚è„šæœ¬+crontab            | `systemd-timer` + `unit` + `oneshot` | ç»Ÿä¸€è°ƒåº¦+é€»è¾‘æ›´æ¸…æ™° |

---

## ğŸ› ï¸ å°ä¾‹å­ï¼šä¸€è¡Œå‘½ä»¤å¯¹æ¯”

| åœºæ™¯          | SysVinit                           | systemd                  |                          |
| ----------- | ---------------------------------- | ------------------------ | ------------------------ |
| å¯åŠ¨ nginx    | `/etc/init.d/nginx start`          | `systemctl start nginx`  |                          |
| æŸ¥çœ‹ nginx çŠ¶æ€ | \`ps aux                           | grep nginx\`             | `systemctl status nginx` |
| æŸ¥çœ‹ nginx æ—¥å¿— | `tail -f /var/log/nginx/error.log` | `journalctl -u nginx -f` |                          |
| è®¾ç½®å¼€æœºå¯åŠ¨      | `chkconfig nginx on`               | `systemctl enable nginx` |                          |

---

## âœ¨ æ€»ç»“ä¸€å¥è¯ï¼š

> ä» **â€œæ‰‹åŠ¨æ§åˆ¶ã€åˆ†å‘å‘½ä»¤â€** åˆ° **â€œç»Ÿä¸€æ¥å£ã€çŠ¶æ€æ„ŸçŸ¥ã€è‡ªåŠ¨æ¢å¤â€**ï¼Œ`systemd` æŠŠ Linux è¿ç»´æ¨å…¥äº†ä¸€ä¸ªå¯è§†åŒ–ã€è‡ªåŠ¨åŒ–ã€ç»“æ„åŒ–çš„ç°ä»£æ—¶ä»£ã€‚

ä»¥ä¸‹æ˜¯ **Linux è¿ç»´å¸¸ç”¨å‘½ä»¤å¯¹ç…§è¡¨**ï¼Œé‡ç‚¹å¯¹æ¯”äº† **SysVinit/ä¼ ç»Ÿå‘½ä»¤** å’Œ **systemd æ—¶ä»£**å¯¹åº”çš„å‘½ä»¤å’Œæ“ä½œï¼Œæ–¹ä¾¿ä½ å¿«é€Ÿè¿ç§»å’Œç†è§£ã€‚

# ğŸš€ Linux è¿ç»´å‘½ä»¤å¯¹ç…§è¡¨ï¼ˆSysVinit/ä¼ ç»Ÿ vs systemdï¼‰

| ä»»åŠ¡ç±»åˆ«       | ä¼ ç»Ÿ SysVinit / å…¶ä»–å‘½ä»¤                                            | systemd æ—¶ä»£å‘½ä»¤ / å·¥å…·                               | è¯´æ˜ / å¤‡æ³¨                              |
| ---------- | ------------------------------------------------------------- | ----------------------------------------------- | ------------------------------------ |
| **æœåŠ¡ç®¡ç†**   | `/etc/init.d/nginx start`                                     | `systemctl start nginx`                         | å¯åŠ¨æœåŠ¡                                 |
|            | `/etc/init.d/nginx stop`                                      | `systemctl stop nginx`                          | åœæ­¢æœåŠ¡                                 |
|            | `/etc/init.d/nginx restart`                                   | `systemctl restart nginx`                       | é‡å¯æœåŠ¡                                 |
|            | `/etc/init.d/nginx status`                                    | `systemctl status nginx`                        | æŸ¥çœ‹æœåŠ¡çŠ¶æ€                               |
|            | `service nginx start`                                         | ä¹Ÿå¯ç”¨ `systemctl`                                 | éƒ¨åˆ†ç³»ç»Ÿå…¼å®¹æ—§å‘½ä»¤                            |
|            | `chkconfig nginx on` / `update-rc.d nginx enable`             | `systemctl enable nginx`                        | è®¾ç½®æœåŠ¡å¼€æœºå¯åŠ¨                             |
|            | `chkconfig nginx off` / `update-rc.d nginx disable`           | `systemctl disable nginx`                       | å–æ¶ˆå¼€æœºå¯åŠ¨                               |
| **æœåŠ¡æ—¥å¿—**   | `tail -f /var/log/nginx/error.log`                            | `journalctl -u nginx -f`                        | æŸ¥çœ‹æœåŠ¡å®æ—¶æ—¥å¿—                             |
|            | `cat /var/log/messages`                                       | `journalctl`                                    | æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—                               |
| **ç³»ç»Ÿå¯åŠ¨ç®¡ç†** | è¿è¡Œçº§åˆ«åˆ‡æ¢ `init 3` / `telinit 3`                                 | `systemctl isolate multi-user.target`           | åˆ‡æ¢è¿è¡Œçº§åˆ« / ç›®æ ‡çŠ¶æ€                        |
|            | æŸ¥çœ‹è¿è¡Œçº§åˆ« `runlevel`                                             | `systemctl get-default`                         | æŸ¥çœ‹é»˜è®¤å¯åŠ¨ç›®æ ‡                             |
|            |                                                               | `systemctl set-default graphical.target`        | è®¾ç½®é»˜è®¤å¯åŠ¨ç›®æ ‡ï¼ˆå¤šç”¨æˆ·æˆ–å›¾å½¢ï¼‰                     |
| **ç½‘ç»œç®¡ç†**   | `ifconfig` / `ip addr` / `route`                              | `ip addr` / `ip route` / `networkctl`           | `networkctl` éœ€å¯ç”¨ systemd-networkd æœåŠ¡ |
|            | `/etc/network/interfaces` æˆ– `/etc/sysconfig/network-scripts/` | `/etc/systemd/network/*.network`                | ç½‘ç»œé…ç½®æ–‡ä»¶è·¯å¾„ä¸åŒ                           |
|            | `service network restart`                                     | `systemctl restart systemd-networkd`            | é‡å¯ç½‘ç»œæœåŠ¡                               |
|            | `nmcli`                                                       | `nmcli`ï¼ˆNetworkManager CLIï¼Œç‹¬ç«‹å·¥å…·ï¼‰                | æ¡Œé¢ç³»ç»Ÿå¤šç”¨ NetworkManager ç®¡ç†ç½‘ç»œ           |
| **ç£ç›˜æŒ‚è½½**   | `mount / umount`                                              | `mount / umount` / `systemctl start foo.mount`  | æŒ‚è½½å‘½ä»¤ä¸€è‡´ï¼›systemd å¯ç®¡ç†æŒ‚è½½ç‚¹ä¸º unit          |
|            | ç¼–è¾‘ `/etc/fstab`                                               | ç¼–è¾‘ `/etc/fstab` æˆ– systemd mount unit æ–‡ä»¶         | æŒ‚è½½é…ç½®æ–¹å¼æœ‰æ‰©å±•                            |
|            |                                                               | `systemctl daemon-reexec`                       | é‡æ–°åŠ è½½ systemd é…ç½®                      |
| **è¿›ç¨‹ç®¡ç†**   | `ps aux` / `kill PID`                                         | ä¾ç„¶ä½¿ç”¨ `ps`ã€`kill`                                | è¿›ç¨‹å‘½ä»¤æ— å˜åŒ–                              |
|            |                                                               | `systemctl kill service-name`                   | æ€æ­»æ•´ä¸ªæœåŠ¡æ§åˆ¶ç»„å†…æ‰€æœ‰è¿›ç¨‹                       |
| **CPU ç®¡ç†** | `nice` / `renice` / `taskset`                                 | `systemctl set-property service CPUQuota=50%`   | æ”¯æŒæœåŠ¡çº§åˆ« CPU é™åˆ¶                        |
| **å†…å­˜ç®¡ç†**   | `free` / `vmstat`                                             | `systemctl set-property service MemoryMax=512M` | æœåŠ¡çº§å†…å­˜é™åˆ¶                              |
| **å®šæ—¶ä»»åŠ¡**   | `crontab -e`                                                  | `systemd timers`                                | æ”¯æŒä¾èµ–ã€æ—¥å¿—åŠçŠ¶æ€æŸ¥çœ‹                         |
|            | `cron`                                                        | `systemctl list-timers`                         | åˆ—å‡ºå®šæ—¶ä»»åŠ¡                               |
|            |                                                               | `journalctl -u name.timer`                      | æŸ¥çœ‹å®šæ—¶ä»»åŠ¡æ—¥å¿—                             |
| **æ—¥å¿—ç®¡ç†**   | `/var/log/syslog` / `/var/log/messages`                       | `journalctl`                                    | é›†ä¸­ã€ç»“æ„åŒ–æ—¥å¿—                             |
|            | `tail` / `grep` ç­‰                                             | `journalctl -xe` / `journalctl -f`              | æ”¯æŒä¸°å¯Œçš„è¿‡æ»¤å’Œå®æ—¶æŸ¥çœ‹                         |
| **ç³»ç»Ÿä¿¡æ¯**   | `uptime` / `free -m` / `df -h`                                | å‘½ä»¤ä¸å˜ï¼Œsystemd ä¸æ›¿ä»£                                | ä¼ ç»Ÿç³»ç»Ÿä¿¡æ¯å‘½ä»¤ä¾æ—§ä½¿ç”¨                         |

---

# ğŸ“Œ é™„åŠ  Tips

| äº‹é¡¹              | å‘½ä»¤ä¸¾ä¾‹                                  |
| --------------- | ------------------------------------- |
| æŸ¥çœ‹æ‰€æœ‰è¿è¡Œçš„æœåŠ¡       | `systemctl list-units --type=service` |
| æŸ¥çœ‹å¤±è´¥çš„æœåŠ¡         | `systemctl --failed`                  |
| é‡æ–°åŠ è½½ systemd é…ç½® | `systemctl daemon-reload`             |
| é‡å¯ç³»ç»Ÿ            | `systemctl reboot`                    |
| å…³é—­ç³»ç»Ÿ            | `systemctl poweroff`                  |

---

# æ€»ç»“

| ç‰¹ç‚¹     | SysVinit / ä¼ ç»Ÿå‘½ä»¤ | systemd / ç°ä»£å‘½ä»¤      |
| ------ | --------------- | ------------------- |
| å‘½ä»¤ç»Ÿä¸€æ€§  | å‘½ä»¤å¤šæ ·ï¼Œåˆ†æ•£         | ç»Ÿä¸€ `systemctl`ï¼Œé›†ä¸­ç®¡ç† |
| æœåŠ¡ç®¡ç†   | è„šæœ¬æ–¹å¼            | å•å…ƒæ–‡ä»¶ã€ä¾èµ–ç®¡ç†           |
| æ—¥å¿—ç®¡ç†   | åˆ†æ•£æ—¥å¿—æ–‡ä»¶          | `journalctl` ç»Ÿä¸€æ—¥å¿—ç³»ç»Ÿ |
| èµ„æºç®¡ç†   | æ—                | åŸºäº CGroup çš„ç»†ç²’åº¦èµ„æºé™åˆ¶  |
| å¯åŠ¨æ•ˆç‡   | ä¸²è¡Œå¯åŠ¨            | å¹¶è¡Œå¯åŠ¨+ä¾èµ–å›¾            |
| è‡ªåŠ¨æ¢å¤èƒ½åŠ› | æ—                | è‡ªåŠ¨é‡å¯ã€å¤±è´¥æ£€æµ‹           |

